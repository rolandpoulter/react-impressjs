{"version":3,"sources":["../src/components/Impress.js"],"names":["html","document","documentElement","body","_lastHash","_stepsData","_activeStep","_idHelper","Impress","props","rootData","hint","hintMessage","fallbackMessage","progress","onInit","onGoTo","onBeforeGoTo","disableEvents","callbacks","rootStyles","position","top","left","transformOrigin","transition","transformStyle","defaultData","x","y","z","rotateX","rotateY","rotateZ","scale","state","windowScale","config","impressSupported","activeStep","data","cameraStyles","startX","deltaX","init","goto","onKeyUp","e","keyCode","end","home","prev","next","addEventListener","onResize","window","onHashChange","location","hash","nextPorps","setState","removeEventListener","defaults","width","height","maxScale","minScale","perspective","transitionDuration","classList","dataset","overflow","$set","$merge","call","step","duration","skipCallbacks","Promise","reject","scrollTo","target","zoomin","delay","id","targetScale","transform","transitionDelay","resolve","setTimeout","stepsDataKeys","Object","keys","findIndex","k","length","stepsDataEntries","entries","firstStep","lastStep","touches","clientX","preventDefault","index","React","cloneElement","key","idHelper","initStep","bind","children","steps","Children","map","stepComponent","stepsTotal","count","handleTouchStart","handleTouchMove","handleTouchEnd","className","Component","propTypes","PropTypes","object","bool","oneOfType","string","defaultProps"],"mappings":"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","file":"Impress.js","sourcesContent":["import React, {Component} from 'react';\nimport update             from 'react/lib/update';\nimport PropTypes          from 'prop-types';\nimport {\n  computeWindowScale,\n  css,\n  getElementFromHash,\n  perspective,\n  pfx,\n  rotate,\n  scale,\n  throttle,\n  toNumber,\n  translate,\n}                         from './util';\n\nimport Progress from './Progress';\nimport Hint     from './Hint';\n\nconst html = document.documentElement,\n      body = document.body;\n\nlet _lastHash  = '',\n    _stepsData = {},\n    _activeStep,\n    _idHelper  = 1;\n\nexport default class Impress extends Component {\n  constructor(props) {\n    super(props);\n\n    const {\n      rootData,\n      hint,\n      hintMessage,\n      fallbackMessage,\n      progress,\n      onInit,\n      onGoTo,\n      onBeforeGoTo,\n      disableEvents\n    } = props;\n\n    this.callbacks = {\n      onInit,\n      onGoTo,\n      onBeforeGoTo,\n    };\n\n    if (disableEvents) { this.disableEvents = true; }\n\n    const rootStyles = {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transformOrigin: 'top left',\n      transition: 'all 0s ease-in-out',\n      transformStyle: 'preserve-3d',\n    };\n    const defaultData = {\n      x: 0, y: 0, z: 0,\n      rotateX: 0, rotateY: 0, rotateZ: 0,\n      scale: 1,\n    };\n\n    // <Impress /> State\n    this.state = {\n      /** Impress Config **/\n      rootStyles,\n      windowScale: null,\n      config: null,\n      impressSupported: false,\n\n      /** Step Status **/\n      activeStep: {\n        data: defaultData,\n      },\n\n      /** Camera Status **/\n      cameraStyles: rootStyles,\n\n      /** Public attributes provide to use **/\n      rootData: rootData, // (not recommended)\n      hint: hint,\n      hintMessage: hintMessage,\n      fallbackMessage: fallbackMessage,\n      progress: progress,\n\n      /** For touch event **/\n      startX: 0,\n      deltaX: 0,\n    };\n  }\n\n  componentWillMount() {\n    // Init impress\n    this.init();\n  }\n\n  componentDidMount() {\n    const {impressSupported} = this.state;\n\n    // 2017/2/28 暫時想不到好方法\n    if (impressSupported)\n      this.goto(_activeStep, 500);\n\n    // Listener for keyboard event\n    if (!this.disableEvents) {\n      this.onKeyUp = throttle((e) => {\n        if (e.keyCode === 9 ||\n            (e.keyCode >= 32 && e.keyCode <= 40)) {\n          switch (e.keyCode) {\n            case 35: // End\n              this.end();\n              break;\n            case 36: // Home\n              this.home();\n              break;\n            case 33: // Page up\n            case 37: // Left\n            case 38: // Up\n              this.prev();\n              break;\n            case 9:  // Tab\n            case 32: // Space\n            case 34: // Page down\n            case 39: // Right\n            case 40: // Down\n              this.next();\n              break;\n            default:\n              break;\n          }\n        }\n      }, 250);\n      document.addEventListener('keyup', this.onKeyUp, false);\n    }\n\n    // Window resize\n    this.onResize = throttle(() => {\n      if (impressSupported)\n        this.goto(this.state.activeStep, 500, true);\n    }, 250);\n    window.addEventListener('resize', this.onResize, false);\n\n    // URL hash change\n    this.onHashChange = throttle(() => {\n      if (window.location.hash !== _lastHash)\n        this.goto(getElementFromHash(_stepsData), 500);\n    }, 250);\n    window.addEventListener('hashchange', this.onHashChange, false);\n  }\n\n  componentWillReceiveProps(nextPorps) {\n    this.setState({\n      fallbackMessage: nextPorps.fallbackMessage,\n      hint: nextPorps.hint,\n      hintMessage: nextPorps.hintMessage,\n    });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keyup', this.onKeyUp, false);\n    window.removeEventListener('resize', this.onResize, false);\n    window.removeEventListener('keyup', this.onHashChange, false);\n  }\n\n  /**\n   * Initialize Impress.\n   */\n  init() {\n    const {rootData} = this.state;\n\n    const defaults = {\n      width: 1024,\n      height: 768,\n      maxScale: 1,\n      minScale: 0,\n      perspective: 1000,\n      transitionDuration: 1000,\n    };\n\n    // const ua = navigator.userAgent.toLowerCase()\n\n    // Check impress support or not.\n    const impressSupported =\n        // Browser should support CSS 3D transtorms\n        (pfx('perspective') !== null) &&\n        // Browser should support `classList` and `dataset` APIs\n        (body.classList) &&\n        (body.dataset);// &&\n    // But some mobile devices need to be blacklisted,\n    // because their CSS 3D support or hardware is not\n    // good enough to run impress.js properly, sorry...\n    //( ua.search( /(iphone)|(ipod)|(android)/ ) === -1 );\n\n    // Config\n    const config = {\n      width: toNumber(rootData.width, defaults.width),\n      height: toNumber(rootData.height, defaults.height),\n      maxScale: toNumber(rootData.maxScale, defaults.maxScale),\n      minScale: toNumber(rootData.minScale, defaults.minScale),\n      perspective: toNumber(rootData.perspective, defaults.perspective),\n      transitionDuration: toNumber(\n          rootData.transitionDuration, defaults.transitionDuration,\n      ),\n    };\n    // Window Scale\n    const windowScale = computeWindowScale(config);\n    // HTML height\n    css(html, {\n      height: '100vh',\n      overflow: 'hidden',\n    });\n    // Body style\n    css(body, {\n      height: '100vh',\n      overflow: 'hidden',\n\n      // mobile devise supported\n      position: 'relative',\n    });\n\n    this.setState(update(this.state, {\n      windowScale: {\n        $set: windowScale,\n      },\n      config: {\n        $set: config,\n      },\n      impressSupported: {\n        $set: impressSupported,\n      },\n      rootStyles: {\n        $merge: {\n          'transform': perspective(config.perspective / windowScale) +\n          scale(windowScale),\n        },\n      },\n    }));\n\n    if (this.callbacks.onInit) {\n      this.callbacks.onInit.call(this, this);\n    }\n  }\n\n  /**\n   * Initialize Steps.\n   *\n   * @param {Step} step init every Steps in Impress.\n   */\n  static initStep(step) {\n    // Set first Step as enter Step.\n    if (!_activeStep)\n      _activeStep = step;\n\n    _stepsData = update(_stepsData, {\n      $merge: {\n        [step.id]: {\n          id: step.id,\n          className: step.className,\n          data: step.data,\n          duration: step.duration,\n        },\n      },\n    });\n  }\n\n  /**\n   * Navigate to the SPECIFY Step.\n   *\n   * @param {Step} step you want to navigate to.\n   * @param {number} duration 1000 speed of navigation.\n   */\n  goto(step, duration = 1000, skipCallbacks = false) {\n    if (!skipCallbacks && this.callbacks.onBeforeGoTo && this.callbacks.onBeforeGoTo.call(this, this, step, duration)) {\n      return Promise.reject();\n    }\n\n    const {config, activeStep} = this.state;\n    let {windowScale} = this.state;\n\n    window.scrollTo(0, 0);\n\n    let target = {\n      x: -step.data.x,\n      y: -step.data.y,\n      z: -step.data.z,\n      rotateX: -step.data.rotateX,\n      rotateY: -step.data.rotateY,\n      rotateZ: -step.data.rotateZ,\n      scale: 1 / step.data.scale,\n    };\n\n    // Check scale for zoom-in\n    let zoomin = target.scale >= (1 / activeStep.data.scale);\n\n    duration = toNumber(duration, config.transitionDuration);\n    let delay = (duration / 2);\n\n    if (step.id === activeStep.id)\n      windowScale = computeWindowScale(config);\n\n    const targetScale = target.scale * windowScale;\n\n    this.setState(update(this.state, {\n      activeStep: {\n        $set: step,\n      },\n      rootStyles: {\n        transform: {\n          $set: perspective(config.perspective / targetScale) +\n          scale(targetScale),\n        },\n        transitionDuration: {\n          $set: duration + 'ms',\n        },\n        transitionDelay: {\n          $set: (zoomin ? delay : 0) + 'ms',\n        },\n      },\n      cameraStyles: {\n        transform: {\n          $set: rotate(target, true) + translate(target),\n        },\n        transitionDuration: {\n          $set: duration + 'ms',\n        },\n        transitionDelay: {\n          $set: (zoomin ? 0 : delay) + 'ms',\n        },\n      },\n    }));\n\n    window.location.hash = _lastHash = '#/' + step.id;\n\n    !skipCallbacks && this.callbacks.onGoTo\n      && this.callbacks.onGoTo.call(this, this, step, duration);\n\n    return new Promise((resolve) => {\n      setTimeout(resolve, duration + 16);\n    });\n  }\n\n  // Navigate to the PREVIOUS Step.\n  prev() {\n    const {activeStep} = this.state;\n\n    /**\n     * 2017.04.10\n     * Why we don't use Object.entries() or Object.values() any more ?\n     * Cause the browser of iOS device (Chrome, Safari...) and some of Android devise\n     * DOES'NT supported Object.entries() and Object.values() now...\n     */\n          // const stepsDataEntries = Object.entries( _stepsData );\n          // let prev = stepsDataEntries.findIndex( ([k, v]) => { return k === activeStep.id } ) - 1;\n          // prev = prev >= 0 ? stepsDataEntries[ prev ][1] : stepsDataEntries[ stepsDataEntries.length - 1 ][1];\n\n    const stepsDataKeys = Object.keys(_stepsData);\n    // get index of previous\n    let prev = stepsDataKeys.findIndex(k => k === activeStep.id) - 1;\n\n    // get id via index from stepsData\n    prev = prev >= 0\n        ? stepsDataKeys[prev]\n        : stepsDataKeys[stepsDataKeys.length - 1];\n\n    // get previous step\n    prev = _stepsData[prev];\n\n    return this.goto(prev, prev.duration);\n  }\n\n  // Navigate to the NEXT Step.\n  next() {\n    const {activeStep} = this.state;\n    const stepsDataKeys = Object.keys(_stepsData);\n    let next = stepsDataKeys.findIndex(k => k === activeStep.id) + 1;\n    next = next < stepsDataKeys.length ? stepsDataKeys[next] : stepsDataKeys[0];\n    next = _stepsData[next];\n\n    return this.goto(next, next.duration);\n  }\n\n  // Navigate to the FIRST Step.\n  home() {\n    const stepsDataEntries = Object.entries(_stepsData);\n    const firstStep = stepsDataEntries[0][1];\n\n    return this.goto(firstStep, firstStep.duration);\n  }\n\n  // Navigate to the LAST Step.\n  end() {\n    const stepsDataEntries = Object.entries(_stepsData);\n    const lastStep = stepsDataEntries[stepsDataEntries.length - 1][1];\n\n    return this.goto(lastStep, lastStep.duration);\n  }\n\n  // Touch Start( record start position: startX )\n  handleTouchStart(e) {\n    this.setState({\n      startX: e.touches[0].clientX,\n    });\n  }\n\n  // Touch Move( Calculate touch move path: deltaX )\n  handleTouchMove(e) {\n    e.preventDefault();\n    this.setState({\n      deltaX: this.state.startX - e.touches[0].clientX,\n    });\n  }\n\n  // Touch End( decide navigate previous or next Step via 'deltaX' )\n  handleTouchEnd(e) {\n    if (this.state.deltaX > 0) // slide left\n      this.next();\n    else if (this.state.deltaX < 0) // slide right\n      this.prev();\n\n    // reset\n    this.setState({\n      deltaX: 0,\n    });\n  }\n\n  /**\n   * Create <Step />\n   *\n   * @return {Step} to render children.\n   */\n  stepComponent(step, index) {\n    const {activeStep} = this.state;\n\n    return React.cloneElement(step, {\n      key: index,\n      idHelper: step.props.id ? '' : _idHelper++,\n      activeStep: activeStep,\n      initStep: Impress.initStep.bind(this),\n      goto: this.goto.bind(this),\n    }, step.props.children);\n  }\n\n  render() {\n    const {\n            impressSupported,\n            rootStyles, cameraStyles, activeStep,\n            hint, hintMessage,\n            fallbackMessage,\n            progress,\n          } = this.state;\n    const steps = React.Children.map(this.props.children,\n        this.stepComponent.bind(this));\n    const stepsTotal = React.Children.count(this.props.children);\n\n    return (\n        <div id=\"react-impressjs\"\n             className={\n               (impressSupported\n                   ? 'impress-supported'\n                   : 'impress-not-supported') +\n               (activeStep ? ' impress-on-' + activeStep.id : '') +\n               ' impress-enabled'\n             }\n             onTouchStart={this.handleTouchStart.bind(this)}\n             onTouchMove={this.handleTouchMove.bind(this)}\n             onTouchEnd={this.handleTouchEnd.bind(this)}>\n\n          <div id=\"impress\" style={rootStyles}>\n            <div style={cameraStyles}>\n              {\n                impressSupported ? steps :\n                    <div className=\"fallback-message\">{fallbackMessage}</div>\n              }\n            </div>\n          </div>\n          <Hint\n              hint={hint}\n              stepsData={_stepsData}\n              activeStep={activeStep}\n              hintMessage={hintMessage}/>\n          <Progress\n              progress={progress}\n              stepsData={_stepsData}\n              activeStep={activeStep}\n              stepsTotal={stepsTotal}/>\n        </div>\n    );\n  }\n}\n\nImpress.propTypes = {\n  /**\n   * Impress basic config\n   */\n  rootData: PropTypes.object,\n\n  /**\n   * Whether to display hint or not\n   */\n  hint: PropTypes.bool,\n\n  /**\n   * Hint for presentation\n   */\n  hintMessage: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n\n  /**\n   * Fallback message is only visible when there is impress-not-supported\n   */\n  fallbackMessage: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n\n  /**\n   * Progress of presentation\n   */\n  progress: PropTypes.bool,\n};\n\nImpress.defaultProps = {\n  rootData: {},\n  hint: true,\n  hintMessage: <p>Use <b>Spacebar</b> or <b>Arrow keys</b> to navigate</p>,\n  fallbackMessage: <p>Your browser <b>doesn't support the features\n    required</b> by React-impressJS, so you are presented\n    with a simplified version of this presentation.</p>,\n  progress: false,\n  onInit: function () {},\n  onGoTo: function () {},\n  onBeforeGoTo: function () {return true;},\n  disableEvents: false,\n};\n"]}