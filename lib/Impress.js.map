{"version":3,"sources":["../src/components/Impress.js"],"names":["html","document","documentElement","body","_lastHash","_stepsData","_activeStep","_idHelper","Impress","props","rootData","hint","hintMessage","fallbackMessage","progress","rootStyles","position","top","left","transformOrigin","transition","transformStyle","defaultData","x","y","z","rotateX","rotateY","rotateZ","scale","state","windowScale","config","impressSupported","activeStep","data","cameraStyles","startX","deltaX","init","goto","disableEvents","onKeyUp","e","keyCode","end","home","prev","next","addEventListener","onResize","window","onHashChange","location","hash","nextPorps","setState","removeEventListener","defaults","width","height","maxScale","minScale","perspective","transitionDuration","classList","dataset","overflow","$set","$merge","onInit","call","step","duration","skipCallbacks","onBeforeGoTo","Promise","reject","scrollTo","target","zoomin","delay","id","targetScale","transform","transitionDelay","onGoTo","resolve","setTimeout","progressDivision","stepsDataKeys","Object","keys","findIndex","k","length","stepsDataEntries","entries","firstStep","lastStep","touches","clientX","preventDefault","index","React","cloneElement","key","idHelper","initStep","bind","onPickStep","children","steps","Children","map","stepComponent","stepsTotal","count","handleTouchStart","handleTouchMove","handleTouchEnd","style","className","Component","propTypes","PropTypes","object","bool","oneOfType","string","func","number","defaultProps"],"mappings":"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","file":"Impress.js","sourcesContent":["import React, {Component} from 'react';\nimport update             from 'react/lib/update';\nimport PropTypes          from 'prop-types';\nimport {\n  computeWindowScale,\n  css,\n  getElementFromHash,\n  perspective,\n  pfx,\n  rotate,\n  scale,\n  throttle,\n  toNumber,\n  translate,\n}                         from './util';\n\nimport Progress from './Progress';\nimport Hint     from './Hint';\n\nconst html = document.documentElement,\n      body = document.body;\n\nlet _lastHash  = '',\n    _stepsData = {},\n    _activeStep,\n    _idHelper  = 1;\n\nexport default class Impress extends Component {\n  constructor(props) {\n    super(props);\n\n    const {\n      rootData,\n      hint,\n      hintMessage,\n      fallbackMessage,\n      progress\n    } = props;\n\n    const rootStyles = {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transformOrigin: 'top left',\n      transition: 'all 0s ease-in-out',\n      transformStyle: 'preserve-3d',\n    };\n    const defaultData = {\n      x: 0, y: 0, z: 0,\n      rotateX: 0, rotateY: 0, rotateZ: 0,\n      scale: 1,\n    };\n\n    // <Impress /> State\n    this.state = {\n      /** Impress Config **/\n      rootStyles,\n      windowScale: null,\n      config: null,\n      impressSupported: false,\n\n      /** Step Status **/\n      activeStep: {\n        data: defaultData,\n      },\n\n      /** Camera Status **/\n      cameraStyles: rootStyles,\n\n      /** Public attributes provide to use **/\n      rootData: rootData, // (not recommended)\n      hint: hint,\n      hintMessage: hintMessage,\n      fallbackMessage: fallbackMessage,\n      progress: progress,\n\n      /** For touch event **/\n      startX: 0,\n      deltaX: 0,\n    };\n  }\n\n  componentWillMount() {\n    // Init impress\n    this.init();\n  }\n\n  componentDidMount() {\n    const {impressSupported} = this.state;\n\n    // 2017/2/28 暫時想不到好方法\n    if (impressSupported)\n      this.goto(_activeStep, 500);\n\n    // Listener for keyboard event\n    if (!this.props.disableEvents) {\n      this.onKeyUp = throttle((e) => {\n        if (e.keyCode === 9 ||\n            (e.keyCode >= 32 && e.keyCode <= 40)) {\n          switch (e.keyCode) {\n            case 35: // End\n              this.end();\n              break;\n            case 36: // Home\n              this.home();\n              break;\n            case 33: // Page up\n            case 37: // Left\n            case 38: // Up\n              this.prev();\n              break;\n            case 9:  // Tab\n            case 32: // Space\n            case 34: // Page down\n            case 39: // Right\n            case 40: // Down\n              this.next();\n              break;\n            default:\n              break;\n          }\n        }\n      }, 250);\n      document.addEventListener('keyup', this.onKeyUp, false);\n    }\n\n    // Window resize\n    this.onResize = throttle(() => {\n      if (impressSupported)\n        this.goto(this.state.activeStep, 500, true);\n    }, 250);\n    window.addEventListener('resize', this.onResize, false);\n\n    // URL hash change\n    this.onHashChange = throttle(() => {\n      if (window.location.hash !== _lastHash)\n        this.goto(getElementFromHash(_stepsData), 500);\n    }, 250);\n    window.addEventListener('hashchange', this.onHashChange, false);\n  }\n\n  componentWillReceiveProps(nextPorps) {\n    this.setState({\n      fallbackMessage: nextPorps.fallbackMessage,\n      hint: nextPorps.hint,\n      hintMessage: nextPorps.hintMessage,\n    });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keyup', this.onKeyUp, false);\n    window.removeEventListener('resize', this.onResize, false);\n    window.removeEventListener('keyup', this.onHashChange, false);\n  }\n\n  /**\n   * Initialize Impress.\n   */\n  init() {\n    const {rootData} = this.state;\n\n    const defaults = {\n      width: 1024,\n      height: 768,\n      maxScale: 1,\n      minScale: 0,\n      perspective: 1000,\n      transitionDuration: 1000,\n    };\n\n    // const ua = navigator.userAgent.toLowerCase()\n\n    // Check impress support or not.\n    const impressSupported =\n        // Browser should support CSS 3D transtorms\n        (pfx('perspective') !== null) &&\n        // Browser should support `classList` and `dataset` APIs\n        (body.classList) &&\n        (body.dataset);// &&\n    // But some mobile devices need to be blacklisted,\n    // because their CSS 3D support or hardware is not\n    // good enough to run impress.js properly, sorry...\n    //( ua.search( /(iphone)|(ipod)|(android)/ ) === -1 );\n\n    // Config\n    const config = {\n      width: toNumber(rootData.width, defaults.width),\n      height: toNumber(rootData.height, defaults.height),\n      maxScale: toNumber(rootData.maxScale, defaults.maxScale),\n      minScale: toNumber(rootData.minScale, defaults.minScale),\n      perspective: toNumber(rootData.perspective, defaults.perspective),\n      transitionDuration: toNumber(\n          rootData.transitionDuration, defaults.transitionDuration,\n      ),\n    };\n    // Window Scale\n    const windowScale = computeWindowScale(config);\n    // HTML height\n    css(html, {\n      height: '100vh',\n      overflow: 'hidden',\n    });\n    // Body style\n    css(body, {\n      height: '100vh',\n      overflow: 'hidden',\n\n      // mobile devise supported\n      position: 'relative',\n    });\n\n    this.setState(update(this.state, {\n      windowScale: {\n        $set: windowScale,\n      },\n      config: {\n        $set: config,\n      },\n      impressSupported: {\n        $set: impressSupported,\n      },\n      rootStyles: {\n        $merge: {\n          'transform': perspective(config.perspective / windowScale) +\n          scale(windowScale),\n        },\n      },\n    }));\n\n    if (this.props.onInit) {\n      this.props.onInit.call(this, this);\n    }\n  }\n\n  /**\n   * Initialize Steps.\n   *\n   * @param {Step} step init every Steps in Impress.\n   */\n  static initStep(step) {\n    // Set first Step as enter Step.\n    if (!_activeStep)\n      _activeStep = step;\n\n    _stepsData = update(_stepsData, {\n      $merge: {\n        [step.id]: {\n          id: step.id,\n          className: step.className,\n          data: step.data,\n          duration: step.duration,\n        },\n      },\n    });\n  }\n\n  /**\n   * Navigate to the SPECIFY Step.\n   *\n   * @param {Step} step you want to navigate to.\n   * @param {number} duration 1000 speed of navigation.\n   */\n  goto(step, duration = 1000, skipCallbacks = false) {\n    if (!skipCallbacks && this.props.onBeforeGoTo && this.props.onBeforeGoTo.call(this, this, step, duration)) {\n      return Promise.reject();\n    }\n\n    const {config, activeStep} = this.state;\n    let {windowScale} = this.state;\n\n    window.scrollTo(0, 0);\n\n    let target = {\n      x: -step.data.x,\n      y: -step.data.y,\n      z: -step.data.z,\n      rotateX: -step.data.rotateX,\n      rotateY: -step.data.rotateY,\n      rotateZ: -step.data.rotateZ,\n      scale: 1 / step.data.scale,\n    };\n\n    // Check scale for zoom-in\n    let zoomin = target.scale >= (1 / activeStep.data.scale);\n\n    duration = toNumber(duration, config.transitionDuration);\n    let delay = (duration / 2);\n\n    if (step.id === activeStep.id)\n      windowScale = computeWindowScale(config);\n\n    const targetScale = target.scale * windowScale;\n\n    this.setState(update(this.state, {\n      activeStep: {\n        $set: step,\n      },\n      rootStyles: {\n        transform: {\n          $set: perspective(config.perspective / targetScale) +\n          scale(targetScale),\n        },\n        transitionDuration: {\n          $set: duration + 'ms',\n        },\n        transitionDelay: {\n          $set: (zoomin ? delay : 0) + 'ms',\n        },\n      },\n      cameraStyles: {\n        transform: {\n          $set: rotate(target, true) + translate(target),\n        },\n        transitionDuration: {\n          $set: duration + 'ms',\n        },\n        transitionDelay: {\n          $set: (zoomin ? 0 : delay) + 'ms',\n        },\n      },\n    }));\n\n    window.location.hash = _lastHash = '#/' + step.id;\n\n    !skipCallbacks && this.props.onGoTo\n      && this.props.onGoTo.call(this, this, step, duration);\n\n    return new Promise((resolve) => {\n      setTimeout(resolve, duration + 16);\n    });\n  }\n\n  // Navigate to the PREVIOUS Step.\n  prev() {\n    const {\n      progressDivision\n    } = this.props;\n    const {activeStep} = this.state;\n\n    /**\n     * 2017.04.10\n     * Why we don't use Object.entries() or Object.values() any more ?\n     * Cause the browser of iOS device (Chrome, Safari...) and some of Android devise\n     * DOES'NT supported Object.entries() and Object.values() now...\n     */\n          // const stepsDataEntries = Object.entries( _stepsData );\n          // let prev = stepsDataEntries.findIndex( ([k, v]) => { return k === activeStep.id } ) - 1;\n          // prev = prev >= 0 ? stepsDataEntries[ prev ][1] : stepsDataEntries[ stepsDataEntries.length - 1 ][1];\n\n    const stepsDataKeys = Object.keys(_stepsData);\n    // get index of previous\n    let prev = stepsDataKeys.findIndex(k => k === activeStep.id) - progressDivision;\n\n    // get id via index from stepsData\n    prev = prev >= 0\n        ? stepsDataKeys[prev]\n        : stepsDataKeys[stepsDataKeys.length - progressDivision];\n\n    // get previous step\n    prev = _stepsData[prev];\n\n    return this.goto(prev, prev.duration);\n  }\n\n  // Navigate to the NEXT Step.\n  next() {\n    const {\n      progressDivision\n    } = this.props;\n    const {activeStep} = this.state;\n    const stepsDataKeys = Object.keys(_stepsData);\n    let next = stepsDataKeys.findIndex(k => k === activeStep.id) + progressDivision;\n    next = next < stepsDataKeys.length ? stepsDataKeys[next] : stepsDataKeys[0];\n    next = _stepsData[next];\n\n    return this.goto(next, next.duration);\n  }\n\n  // Navigate to the FIRST Step.\n  home() {\n    const stepsDataEntries = Object.entries(_stepsData);\n    const firstStep = stepsDataEntries[0][1];\n\n    return this.goto(firstStep, firstStep.duration);\n  }\n\n  // Navigate to the LAST Step.\n  end() {\n    const {\n      progressDivision\n    } = this.props;\n    const stepsDataEntries = Object.entries(_stepsData);\n    const lastStep = stepsDataEntries[stepsDataEntries.length - progressDivision][1];\n\n    return this.goto(lastStep, lastStep.duration);\n  }\n\n  // Touch Start( record start position: startX )\n  handleTouchStart(e) {\n    this.setState({\n      startX: e.touches[0].clientX,\n    });\n  }\n\n  // Touch Move( Calculate touch move path: deltaX )\n  handleTouchMove(e) {\n    e.preventDefault();\n    this.setState({\n      deltaX: this.state.startX - e.touches[0].clientX,\n    });\n  }\n\n  // Touch End( decide navigate previous or next Step via 'deltaX' )\n  handleTouchEnd(e) {\n    if (this.state.deltaX > 0) // slide left\n      this.next();\n    else if (this.state.deltaX < 0) // slide right\n      this.prev();\n\n    // reset\n    this.setState({\n      deltaX: 0,\n    });\n  }\n\n  /**\n   * Create <Step />\n   *\n   * @return {Step} to render children.\n   */\n  stepComponent(step, index) {\n    const {activeStep} = this.state;\n\n    return React.cloneElement(step, {\n      key: index,\n      idHelper: step.props.id ? '' : _idHelper++,\n      activeStep: activeStep,\n      initStep: Impress.initStep.bind(this),\n      goto: this.props.disableEvents\n        ? null\n        : (this.props.onPickStep\n          ? this.props.onPickStep.bind(this, this.goto.bind(this))\n          : this.goto.bind(this)),\n    }, step.props.children);\n  }\n\n  render() {\n    const {\n            impressSupported,\n            rootStyles, cameraStyles, activeStep,\n            hint, hintMessage,\n            fallbackMessage,\n            progress,\n          } = this.state;\n    const {\n      progressDivision\n    } = this.props;\n    const steps = React.Children.map(this.props.children,\n        this.stepComponent.bind(this));\n    const stepsTotal = React.Children.count(this.props.children);\n\n    return (\n        <div id=\"react-impressjs\"\n           className={\n             (impressSupported\n                 ? 'impress-supported'\n                 : 'impress-not-supported') +\n             (activeStep ? ' impress-on-' + activeStep.id : '') +\n             ' impress-enabled'\n           }\n           onTouchStart={this.handleTouchStart.bind(this)}\n           onTouchMove={this.handleTouchMove.bind(this)}\n           onTouchEnd={this.handleTouchEnd.bind(this)}\n           style={this.props.style}\n        >\n\n          <div id=\"impress\" style={rootStyles}>\n            <div style={cameraStyles}>\n              {\n                impressSupported ? steps :\n                    <div className=\"fallback-message\">{fallbackMessage}</div>\n              }\n            </div>\n          </div>\n          <Hint\n              hint={hint}\n              stepsData={_stepsData}\n              activeStep={activeStep}\n              hintMessage={hintMessage}/>\n          <Progress\n              progress={progress}\n              progressDivision={progressDivision}\n              stepsData={_stepsData}\n              activeStep={activeStep}\n              stepsTotal={stepsTotal}/>\n        </div>\n    );\n  }\n}\n\nImpress.propTypes = {\n  /**\n   * Impress basic config\n   */\n  rootData: PropTypes.object,\n\n  /**\n   * Whether to display hint or not\n   */\n  hint: PropTypes.bool,\n\n  /**\n   * Hint for presentation\n   */\n  hintMessage: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n\n  /**\n   * Fallback message is only visible when there is impress-not-supported\n   */\n  fallbackMessage: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n\n  /**\n   * Progress of presentation\n   */\n  progress: PropTypes.bool,\n\n  style: PropTypes.object,\n  onInit: PropTypes.func,\n  onGoTo: PropTypes.func,\n  onBeforeGoTo: PropTypes.func,\n  onPickStep: PropTypes.func,\n  disableEvents: PropTypes.bool,\n  progressDivision: PropTypes.number\n};\n\nImpress.defaultProps = {\n  style: {},\n  rootData: {},\n  hint: true,\n  hintMessage: <p>Use <b>Spacebar</b> or <b>Arrow keys</b> to navigate</p>,\n  fallbackMessage: <p>Your browser <b>doesn't support the features\n    required</b> by React-impressJS, so you are presented\n    with a simplified version of this presentation.</p>,\n  progress: false,\n  onInit: function () {},\n  onGoTo: function () {},\n  onBeforeGoTo: function () {return true;},\n  onPickStep: null,\n  disableEvents: false,\n  progressDivision: 1,\n};\n"]}