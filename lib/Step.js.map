{"version":3,"sources":["../src/components/Step.js"],"names":["defaultData","x","y","z","rotateX","rotateY","rotateZ","scale","Step","props","className","duration","style","state","id","gtepID","data","getData","isPresented","initStep","nextProps","activeStep","setState","$set","e","goto","target","classList","contains","document","documentElement","parentNode","idHelper","rotate","_stepStyle","position","transform","transformStyle","children","_stepClassName","getClassName","getStyle","handleClick","bind","Component"],"mappings":"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","file":"Step.js","sourcesContent":["import React, {Component}                   from 'react';\nimport update                               from 'react/lib/update';\nimport {rotate, scale, toNumber, translate} from './util';\n\nconst defaultData = {\n  x: 0,\n  y: 0,\n  z: 0,\n  rotateX: 0,\n  rotateY: 0,\n  rotateZ: 0,\n  scale: 1,\n};\n\nexport default class Step extends Component {\n  constructor(props) {\n    super(props);\n\n    const {className, duration, style} = this.props;\n\n    this.state = {\n      id: this.gtepID(),\n      className: className ? ('step ' + className) : 'step',\n      data: this.getData(),\n      duration: duration ? duration : 1000,\n      isPresented: false,\n    };\n  }\n\n  componentDidMount() {\n    const {initStep} = this.props;\n\n    initStep(this.state);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {id, isPresented} = this.state;\n\n    if (id === nextProps.activeStep.id && !isPresented)\n      this.setState(update(this.state, {\n        isPresented: {\n          $set: true,\n        },\n      }));\n  }\n\n  // Step's Event\n  handleClick(e) {\n    const {goto} = this.props;\n\n    if (!goto) {\n      return;\n    }\n\n    let target = e.target;\n\n    while (!target.classList.contains('step') &&\n    !target.classList.contains('active') &&\n    !target.classList.contains('oi-step-element') &&\n    target !== document.documentElement) {\n      target = target.parentNode;\n    }\n\n    if (target !== document.documentElement)\n      if (target.classList.contains('step'))\n        goto(this.state, this.state.duration);\n  }\n\n  // Step's ID, ClassName, Style\n  gtepID() {\n    const {id, idHelper} = this.props;\n\n    return id || ('step-' + idHelper);\n  }\n\n  getClassName() {\n    const {activeStep} = this.props;\n    const {id, className, isPresented} = this.state;\n\n    if (id === activeStep.id)\n      return className + ' active present';\n    else if (isPresented)\n      return className + ' past';\n    else\n      return className + ' future';\n  }\n\n  getData() {\n    const {data} = this.props;\n\n    return data ? {\n      x: toNumber(data.x),\n      y: toNumber(data.y),\n      z: toNumber(data.z),\n      rotateX: toNumber(data.rotateX),\n      rotateY: toNumber(data.rotateY),\n      rotateZ: toNumber(data.rotateZ || data.rotate),\n      scale: toNumber(data.scale, 1),\n    } : defaultData;\n  }\n\n  getStyle() {\n    const {data} = this.state;\n\n    let _stepStyle = {\n      ...(this.props.style || {}),\n      position: 'absolute',\n      transform: 'translate(-50%, -50%) ',\n      transformStyle: 'preserve-3d',\n    };\n\n    _stepStyle.transform += translate(data ? data : defaultData) +\n        rotate(data ? data : defaultData) +\n        scale(data.scale ? data.scale : defaultData);\n\n    return _stepStyle;\n  }\n\n  render() {\n    const {children} = this.props;\n    const {id} = this.state;\n\n    const _stepClassName = this.getClassName();\n    const _stepStyle = this.getStyle();\n\n    return (\n        <div id={id}\n             className={_stepClassName}\n             style={_stepStyle}\n             onClick={this.handleClick.bind(this)}>\n          {children}\n        </div>\n    );\n  }\n}\n"]}